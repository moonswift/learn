





### 中断活动的全过程



1、中断请求：中断事件一旦发生或者中断条件一旦构成，中断源提交“申请报告”，与请求CPU暂时放下目前的工作而转为中断源作为专项服务

2、中断屏蔽：虽然中断源提交了“申请报告”，但是，是否得到CPU的响应，还要取决于“申请报告”是否能够通过2道或者3道“关卡”（中断屏蔽）送达CPU（相应的中断屏蔽位等于1，为关卡放行；反之相应的中断屏蔽位等于0，为关卡禁止通行）；

3、中断响应：如果一路放行，则CPU响应中断后，将被打断的工作断点记录下来（把断点地址保护到堆栈），挂起“不再受理其他申请报告牌”（清除全局中断标志位GIE=0），跳转到中断服务子程序

4、保护现场：在处理新任务时可能破坏原有的工作现场，所以需要对工作现场和工作环境进行适当保护；

5、调查中断源：检查“申请报告”是由哪个中断源提交的，以便作出有针对性的服务；

6、中断处理：开始对查明的中断源进行有针对性的中断服务；

7、清除标志：在处理完毕相应的任务之后，需要进行撤消登记（清除中断标志），以避免造成重复响应；

8、恢复现场：恢复前面曾经被保护起来的工作现场，以便继续执行被中断的工作；

9、中断返回：将被打断的工作断点找回来（从堆栈中恢复断点地址），并摘下“不再受理其他申请报告牌”（GIE＝1），继续执行原先被打断的工作。